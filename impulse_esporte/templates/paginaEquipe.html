{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
  
  <title>Página da Equipe - Impulso Esporte</title>
  
  <link rel="stylesheet" href="{% static 'main.css' %}">
  <link rel="stylesheet" href="{% static 'paginaEquipe.css' %}">
</head>
<body>
  {% include 'headers/headerPadrao.html' %}

  <main class="main-container">
    <div class="equipe-container">
      <div class="equipe-header">
        <h1>{{ equipe.nome }}</h1>
        <p>
          <strong>Modalidade:</strong> {{ equipe.modalidade }}<br>
          <strong>Cidade:</strong> {{ equipe.cidade }}<br>
        </p>
        {% if not is_owner %}
          <div class="profile-info">
            <em>Visualizando perfil da equipe</em>
          </div>
        {% endif %}
      </div>

      {% if is_owner %}
      <div class="equipe-actions">
        <a href="{% url 'buscar_patrocinadores' %}" class="btn-action">
          <h3>Buscar Patrocinadores</h3>
          <p>Encontre novos patrocinadores</p>
        </a>
        <a href="{% url 'buscar_equipes' %}" class="btn-action">
          <h3>Gerenciar Atletas</h3>
          <p>Adicione e gerencie seus atletas</p>
        </a>
        <a href="#" class="btn-action">
          <h3>Adicionar Partida</h3>
          <p>Registre suas próximas partidas</p>
        </a>
      </div>
      {% endif %}

      <!-- SEÇÃO DE PATROCINADORES DINÂMICA -->
      <div class="equipe-section">
        <h2>Nossos Patrocinadores</h2>
        <div class="section-content">
          <div class="patrocinadores-grid">
            {% for patrocinador in patrocinadores %}
            <div class="patrocinador-card">
              <div class="patrocinador-logo">
                {% if patrocinador.logo %}
                  <img src="{{ patrocinador.logo.url }}" alt="{{ patrocinador.empresa }}">
                {% else %}
                  <p>{{ patrocinador.empresa }}</p>
                {% endif %}
              </div>
              <div class="patrocinador-info">
                <h4>{{ patrocinador.empresa }}</h4>
                <p>{{ patrocinador.descricao|default:"Patrocinador da equipe" }}</p>
                {% if patrocinador.site %}
                  <a href="{{ patrocinador.site }}" class="btn-sponsor" target="_blank">Ver Detalhes</a>
                {% endif %}
              </div>
            </div>
            {% empty %}
              <p style="text-align: center;">Nenhum patrocinador vinculado a esta equipe.</p>
            {% endfor %}

            {% if is_owner %}
            <div class="add-patrocinador-card">
              <div class="add-content">
                <h4>+ Adicionar Patrocinador</h4>
                <p>Busque novos parceiros para sua equipe</p>
                <a href="{% url 'buscar_patrocinadores' %}" class="btn-add-sponsor">Buscar</a>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

<!-- SEÇÃO DE ATLETAS (DINÂMICA) -->
<div class="equipe-section">
  <h2>Nossos Atletas</h2>
  <div class="section-content">
    <div class="atletas-grid">
      {% for atleta in jogadores %}
        <div class="atleta-card">
          <span class="atleta-name">{{ atleta.usuario.username }}</span>
          <span class="atleta-position">{{ atleta.posicao }}</span>
        </div>
      {% empty %}
        <p style="text-align: center;">Nenhum atleta vinculado à equipe ainda.</p>
      {% endfor %}
    </div>
    <div class="section-footer">
      <a href="{% url 'listar_atletas' equipe.id %}" class="btn-primary">Adicionar Novo Atleta </a>
    </div>
  </div>
</div>


<!-- SEÇÃO DE PARTIDAS (DINÂMICA) -->
<div class="equipe-section">
  <h2>Próximas Partidas</h2>
  <div class="section-content">
    {% if partidas %}
    <div class="partidas-table">
      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Horário</th>
            <th>Adversário</th>
            <th>Local</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for partida in partidas %}
          <tr>
            <td>{{ partida.data|date:"d/m/Y" }}</td>
            <td>{{ partida.horario|time:"H:i" }}</td>
            <td>{{ partida.adversario }}</td>
            <td>{{ partida.local }}</td>
            <td>
              <a href="{% url 'editar_partida' partida.id %}" class="btn-edit-small">Editar</a>
              <form action="{% url 'excluir_partida' partida.id %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn-remove" onclick="return confirm('Tem certeza que deseja excluir esta partida?');">×</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p style="text-align: center;">Nenhuma partida cadastrada.</p>
    {% endif %}
    <div class="section-footer">
      <a href="{% url 'adicionar_partida' equipe.id %}" class="btn-primary">Adicionar Nova Partida</a>
    </div>
  </div>
</div>


      <!-- SEÇÃO DE ESTATÍSTICAS -->
      <div class="equipe-section">
        <h2>Estatísticas da Equipe</h2>
        <div class="section-content">
          <div class="stats-grid">
            <div class="stat-card"><div class="stat-number">7</div><div class="stat-label">Atletas</div></div>
            <div class="stat-card"><div class="stat-number">{{ patrocinadores|length }}</div><div class="stat-label">Patrocinadores</div></div>
            <div class="stat-card"><div class="stat-number">2024</div><div class="stat-label">Ano de Fundação</div></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div class="info-box">
    <h2>Dicas para Equipes</h2>
    <p>
      Mantenha sua equipe sempre organizada! Gerencie seus atletas, cultive bons relacionamentos 
      com patrocinadores e planeje suas partidas com antecedência. O sucesso é resultado de uma boa gestão.
    </p>
  </div>
</body>
</html>
